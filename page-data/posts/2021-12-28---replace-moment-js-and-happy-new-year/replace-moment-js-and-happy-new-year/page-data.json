{
    "componentChunkName": "component---src-templates-post-template-post-template-tsx",
    "path": "/posts/2021-12-28---replace-moment-js-and-happy-new-year/replace-moment-js-and-happy-new-year",
    "result": {"data":{"markdownRemark":{"id":"7104047d-3ac7-5b71-81fb-38582543a693","html":"<p>Part one - Replace moment.js</p>\n<p>Iâ€™ve been using moment.js since I got my first job.</p>\n<p>This year, it has been replaced by date-fns in all of our projects.</p>\n<p>The benefit is our bundle size has been reduced from moment+moment-timezone(Gzip 172kb) to less than date-fns+date-fns-tz(Gzip 22kb)</p>\n<p>Why did I say it less than 22kb? Because date-fns supports tree-shaking naturally.</p>\n<p>Here are techniques:</p>\n<ol>\n<li>\n<p>Technical selection</p>\n<p><a href=\"https://github.com/you-dont-need/You-Dont-Need-Momentjs#brief-comparison\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">You-Dont-Need-Momentjs</a></p>\n<p>This inspires me and provides the courage to me.</p>\n<p>I struggled about choosing dayjs or date-fns.</p>\n<p>Both of them are great libraries.</p>\n<p>According to <a href=\"https://github.com/you-dont-need/You-Dont-Need-Momentjs#feature-parity\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">feature parity</a>, date-fns has the same features comparing to moment.js, in which case, no workarounds and no 3rd parties are required for the replacement.</p>\n<p>So my selection is date-fns.</p>\n</li>\n<li>\n<p>Replace moment formats with date-fns formats\nThe formats indicate different outputs.</p>\n<p>Compare moment and date-fns and create alias between them would speed up the progress.</p>\n</li>\n<li>\n<p>Replace utils\n<a href=\"https://github.com/you-dont-need/You-Dont-Need-Momentjs#feature-parity\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">feature parity</a> covers 90% utils replacement.</p>\n</li>\n<li>\n<p>Rebuild antd components\nAnt Design heavily use moment.js and moment-timezone library.</p>\n<p>It provides some solutions in reference to <a href=\"https://ant.design/docs/react/replace-moment\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://ant.design/docs/react/replace-moment</a>.</p>\n<p>But it has a bug that when the customized datepicker component is created using the snippet.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"> <span class=\"token keyword\">import</span> dateFnsGenerateConfig <span class=\"token keyword\">from</span> <span class=\"token string\">'rc-picker/lib/generate/dateFns'</span>\n <span class=\"token keyword\">import</span> generatePicker <span class=\"token keyword\">from</span> <span class=\"token string\">'antd/es/date-picker/generatePicker'</span>\n <span class=\"token keyword\">import</span> <span class=\"token string\">'antd/es/date-picker/style/index'</span>\n\n <span class=\"token keyword\">const</span> DatePicker <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">generatePicker</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Date<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>dateFnsGenerateConfig<span class=\"token punctuation\">)</span>\n\n <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> DatePicker<span class=\"token punctuation\">;</span></code></pre></div>\n<p>It actually imports all locales from date-fns-tz in the rc-picker/lib/generate/dateFns file (<a href=\"https://github.com/react-component/picker/blob/dc21474ad9a7af81ba20f1445e4acdd6f746479b/src/generate/dateFns.ts#L26\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/react-component/picker/blob/dc21474ad9a7af81ba20f1445e4acdd6f746479b/src/generate/dateFns.ts#L26</a>)</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Locale <span class=\"token keyword\">from</span> <span class=\"token string\">'date-fns/locale'</span></code></pre></div>\n<p>This is not as expected.\nI created our own generate/dateFns file instead.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"> <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n   getDay<span class=\"token punctuation\">,</span>\n   getYear<span class=\"token punctuation\">,</span>\n   getMonth<span class=\"token punctuation\">,</span>\n   getDate<span class=\"token punctuation\">,</span>\n   endOfMonth<span class=\"token punctuation\">,</span>\n   getHours<span class=\"token punctuation\">,</span>\n   getMinutes<span class=\"token punctuation\">,</span>\n   getSeconds<span class=\"token punctuation\">,</span>\n   addYears<span class=\"token punctuation\">,</span>\n   addMonths<span class=\"token punctuation\">,</span>\n   addDays<span class=\"token punctuation\">,</span>\n   setYear<span class=\"token punctuation\">,</span>\n   setMonth<span class=\"token punctuation\">,</span>\n   setDate<span class=\"token punctuation\">,</span>\n   setHours<span class=\"token punctuation\">,</span>\n   setMinutes<span class=\"token punctuation\">,</span>\n   setSeconds<span class=\"token punctuation\">,</span>\n   isAfter<span class=\"token punctuation\">,</span>\n   isValid<span class=\"token punctuation\">,</span>\n   getWeek<span class=\"token punctuation\">,</span>\n   startOfWeek<span class=\"token punctuation\">,</span>\n   format <span class=\"token keyword\">as</span> formatDate<span class=\"token punctuation\">,</span>\n   parse <span class=\"token keyword\">as</span> parseDate<span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'date-fns'</span>\n <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> enUS<span class=\"token punctuation\">,</span> ja<span class=\"token punctuation\">,</span> zhCN<span class=\"token punctuation\">,</span> zhTW <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'date-fns/locale'</span>\n <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> GenerateConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./generateConfig'</span>\n\n <span class=\"token comment\">/* eslint-disable camelcase */</span>\n <span class=\"token comment\">/* eslint-disable @typescript-eslint/explicit-module-boundary-types */</span>\n <span class=\"token keyword\">const</span> Locale <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> enUS<span class=\"token punctuation\">,</span> ja<span class=\"token punctuation\">,</span> zhTW<span class=\"token punctuation\">,</span> zhCN <span class=\"token punctuation\">}</span>\n <span class=\"token keyword\">const</span> <span class=\"token constant\">DEFAULT_LOCALE</span> <span class=\"token operator\">=</span> <span class=\"token string\">'enUS'</span>\n\n <span class=\"token keyword\">const</span> <span class=\"token constant\">LOCALES_MAP</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n   en<span class=\"token operator\">:</span> <span class=\"token string\">'enUS'</span><span class=\"token punctuation\">,</span>\n   en_US<span class=\"token operator\">:</span> <span class=\"token string\">'enUS'</span><span class=\"token punctuation\">,</span>\n   ja_JP<span class=\"token operator\">:</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span>\n   zh<span class=\"token operator\">:</span> <span class=\"token string\">'zhTW'</span><span class=\"token punctuation\">,</span>\n   zh_TW<span class=\"token operator\">:</span> <span class=\"token string\">'zhTW'</span><span class=\"token punctuation\">,</span>\n   zh_CN<span class=\"token operator\">:</span> <span class=\"token string\">'zhCN'</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">const</span> dealLocal <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>str<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token constant\">LOCALES_MAP</span><span class=\"token punctuation\">[</span>str<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token constant\">DEFAULT_LOCALE</span>\n\n <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">localeParse</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>format<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">return</span> format\n     <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">Y</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'y'</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">D</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'d'</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">gggg</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yyyy'</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">g</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'G'</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">([Ww])o</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'wo'</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">const</span> generateConfig<span class=\"token operator\">:</span> GenerateConfig<span class=\"token operator\">&lt;</span>Date<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// get</span>\n   <span class=\"token function-variable function\">getNow</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">getFixedDate</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">getEndDate</span><span class=\"token operator\">:</span> date <span class=\"token operator\">=></span> <span class=\"token function\">endOfMonth</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">getWeekDay</span><span class=\"token operator\">:</span> date <span class=\"token operator\">=></span> <span class=\"token function\">getDay</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">getYear</span><span class=\"token operator\">:</span> date <span class=\"token operator\">=></span> <span class=\"token function\">getYear</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">getMonth</span><span class=\"token operator\">:</span> date <span class=\"token operator\">=></span> <span class=\"token function\">getMonth</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">getDate</span><span class=\"token operator\">:</span> date <span class=\"token operator\">=></span> <span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">getHour</span><span class=\"token operator\">:</span> date <span class=\"token operator\">=></span> <span class=\"token function\">getHours</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">getMinute</span><span class=\"token operator\">:</span> date <span class=\"token operator\">=></span> <span class=\"token function\">getMinutes</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">getSecond</span><span class=\"token operator\">:</span> date <span class=\"token operator\">=></span> <span class=\"token function\">getSeconds</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n   <span class=\"token comment\">// set</span>\n   <span class=\"token function-variable function\">addYear</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> diff<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">addYears</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> diff<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">addMonth</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> diff<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">addMonths</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> diff<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">addDate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> diff<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">addDays</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> diff<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">setYear</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> year<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setYear</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> year<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">setMonth</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> month<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setMonth</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> month<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">setDate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> num<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setDate</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">setHour</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> hour<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setHours</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> hour<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">setMinute</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> minute<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setMinutes</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> minute<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">setSecond</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> second<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setSeconds</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> second<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n   <span class=\"token comment\">// Compare</span>\n   <span class=\"token function-variable function\">isAfter</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>date1<span class=\"token punctuation\">,</span> date2<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">isAfter</span><span class=\"token punctuation\">(</span>date1<span class=\"token punctuation\">,</span> date2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function-variable function\">isValidate</span><span class=\"token operator\">:</span> date <span class=\"token operator\">=></span> <span class=\"token function\">isValid</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n   locale<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token function-variable function\">getWeekFirstDay</span><span class=\"token operator\">:</span> locale <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">const</span> clone <span class=\"token operator\">=</span> Locale<span class=\"token punctuation\">[</span><span class=\"token function\">dealLocal</span><span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n       <span class=\"token keyword\">return</span> clone<span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>weekStartsOn\n     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n     <span class=\"token function-variable function\">getWeekFirstDate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">,</span> date<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">return</span> <span class=\"token function\">startOfWeek</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> locale<span class=\"token operator\">:</span> Locale<span class=\"token punctuation\">[</span><span class=\"token function\">dealLocal</span><span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n     <span class=\"token function-variable function\">getWeek</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">,</span> date<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">return</span> <span class=\"token function\">getWeek</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> locale<span class=\"token operator\">:</span> Locale<span class=\"token punctuation\">[</span><span class=\"token function\">dealLocal</span><span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n     <span class=\"token function-variable function\">getShortWeekDays</span><span class=\"token operator\">:</span> locale <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">const</span> clone <span class=\"token operator\">=</span> Locale<span class=\"token punctuation\">[</span><span class=\"token function\">dealLocal</span><span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n       <span class=\"token keyword\">return</span> <span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> <span class=\"token number\">7</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n         clone<span class=\"token punctuation\">.</span>localize<span class=\"token punctuation\">.</span><span class=\"token function\">day</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> width<span class=\"token operator\">:</span> <span class=\"token string\">'short'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n       <span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n     <span class=\"token function-variable function\">getShortMonths</span><span class=\"token operator\">:</span> locale <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">const</span> clone <span class=\"token operator\">=</span> Locale<span class=\"token punctuation\">[</span><span class=\"token function\">dealLocal</span><span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n       <span class=\"token keyword\">return</span> <span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> <span class=\"token number\">12</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n         clone<span class=\"token punctuation\">.</span>localize<span class=\"token punctuation\">.</span><span class=\"token function\">month</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> width<span class=\"token operator\">:</span> <span class=\"token string\">'abbreviated'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n       <span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n     <span class=\"token function-variable function\">format</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">,</span> date<span class=\"token punctuation\">,</span> format<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isValid</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span>\n       <span class=\"token punctuation\">}</span>\n       <span class=\"token keyword\">return</span> <span class=\"token function\">formatDate</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> <span class=\"token function\">localeParse</span><span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n         locale<span class=\"token operator\">:</span> Locale<span class=\"token punctuation\">[</span><span class=\"token function\">dealLocal</span><span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n     <span class=\"token function-variable function\">parse</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">,</span> formats<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> formats<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token keyword\">const</span> format <span class=\"token operator\">=</span> <span class=\"token function\">localeParse</span><span class=\"token punctuation\">(</span>formats<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n         <span class=\"token keyword\">const</span> formatText <span class=\"token operator\">=</span> text\n         <span class=\"token keyword\">const</span> date <span class=\"token operator\">=</span> <span class=\"token function\">parseDate</span><span class=\"token punctuation\">(</span>formatText<span class=\"token punctuation\">,</span> format<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n           locale<span class=\"token operator\">:</span> Locale<span class=\"token punctuation\">[</span><span class=\"token function\">dealLocal</span><span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n         <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n         <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isValid</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n           <span class=\"token keyword\">return</span> date\n         <span class=\"token punctuation\">}</span>\n       <span class=\"token punctuation\">}</span>\n       <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span>\n     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> generateConfig</code></pre></div>\n<p>Then we could use our own config.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"> <span class=\"token keyword\">import</span> generatePicker <span class=\"token keyword\">from</span> <span class=\"token string\">'antd/lib/date-picker/generatePicker'</span>\n <span class=\"token keyword\">import</span> dateFnsGenerateConfig <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/forms/DateFnsComponents/dateFnsGenerateConfig'</span>\n <span class=\"token keyword\">import</span> <span class=\"token string\">'antd/lib/date-picker/style/index'</span>\n\n <span class=\"token keyword\">const</span> DatePicker <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">generatePicker</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Date<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>dateFnsGenerateConfig<span class=\"token punctuation\">)</span>\n\n <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> DatePicker</code></pre></div>\n</li>\n<li>\n<p>Check if any other libraries reused Ant Designâ€™s DatePicker or Calendar component.\nFor instance, we use a json schema form library and it uses them. I recreated the component and replace the moment.js as well.</p>\n</li>\n</ol>\n<hr>\n<p>Part two - Happy new year!</p>\n<p>I hung out with my dearest friends last weekend.</p>\n<p>We had a great time during Christmas.</p>\n<p>All the songs, fireworks, laughs and joys we shared together.</p>\n<p>I recalled the start of this year. Someone copy my work achievement and put it on his blog. I was being really upset about it when reading that post for the first time. Then I realized that post actually didnâ€™t write the key point although my code was copied 99%. The missing 1% would make the achievement failed entirely.\nWhy would the code be posted as it is not working? It wonâ€™t help others.</p>\n<p>My friend told me that Iâ€™m always the creator and yes I am.</p>\n<p>This year I meet some great people, expertise Next.js and experience with GatsbyJs.\nI really enjoy my work, coding and the collaborations.\nEvery time our BE fellows told me they are BFF(backend for frontend). I just want to say we are BFF(best friends forever).</p>\n<p>I wish everyone a happy new year in advance.</p>\n<p>I will continue with English writing and include Flutter into my skill list next year.</p>","fields":{"slug":"/posts/2021-12-28---replace-moment-js-and-happy-new-year/replace-moment-js-and-happy-new-year","tagSlugs":["/tag/frontend/","/tag/web-development/"]},"frontmatter":{"date":"2021-12-18T12:40:32.169Z","description":"","tags":["Frontend","Web Development"],"title":"Replace moment.js and Happy New Year","socialImage":""}}},"pageContext":{"slug":"/posts/2021-12-28---replace-moment-js-and-happy-new-year/replace-moment-js-and-happy-new-year"}},
    "staticQueryHashes": ["251939775","357378587","401334301"]}